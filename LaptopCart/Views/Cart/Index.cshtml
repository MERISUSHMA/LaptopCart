@model IEnumerable<CartItem>
@{
    double total = 0;
    double itemTotal = 0;

}
<partial name="_NotificationMessage" />
<h2 class="my-4">Shopping Cart</h2>

<table class="table table-bordered shadow">
    <thead class="table-dark">
        <tr>
            <th>Image</th>
            <th>Product</th>
            <th>Description</th>
            <th style="width:120px;">Quantity</th>
            <th>Unit Price</th>
            <th>Total</th>
            <th style="width:150px;">Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            itemTotal = item.Quantity * Convert.ToDouble(item.Product.Price);
            total += itemTotal;
            <tr>
                <td>
                    <img src ="@(item.Product.ImagePath ?? "https://placehold.co/500x600/png")"
                    class="img-thumbnail" style="max-height:80px;"/>
                </td>
                <td>@item.Product.Name</td>
                <td>
                    <small>@Html.Raw(item.Product.Description)</small>
                </td>
                <td class="text-center">@item.Quantity</td>
                <td>₹@item.Product.Price?
                    .ToString("0.00")</td>
                <td>₹@itemTotal.ToString("0.00")</td>
                <td>
                    <div class="btn-group">
                        <a asp-action="plus" asp-route-cartId="@item.Id" class="btn btn-sm btn-outline-success"><i class="bi bi-plus"></i></a>
<a asp-action="minus" asp-route-cartId="@item.Id" class="btn btn-sm btn-outline-warning"><i class="bi bi-dash"></i></a>
    <a asp-action="remove" asp-route-cartId="@item.Id" class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></a>


                        </div>
                </td>
                
            </tr>
        }
    </tbody>
</table>
<tfoot>
    <tr class="table-secondary">
        <td colspan="5" class="text-end fw-bold">Grand Total</td>
        <td colspan="2" class="fw-bold">₹@total.ToString("0.00")</td>
    </tr>
</tfoot>
<div class="text-center mt-4">
    <a asp-controller="Product" asp-action="Index" class="btn btn-outline-primary me-2">Continue Shopping</a>
    <a asp-controller="Summary" class="btn btn-primary">Proceed to Summary</a>
</div>